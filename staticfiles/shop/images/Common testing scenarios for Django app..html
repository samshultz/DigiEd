<!DOCTYPE html>
<!-- saved from url=(0076)https://www.agiliq.com/blog/2013/04/common-testing-scenarios-for-django-app/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, minimum-scale=1.0">
<title>Common testing scenarios for Django app.</title>


<script type="text/javascript" async="" src="./Common testing scenarios for Django app._files/analytics.js.download"></script><script async="" src="./Common testing scenarios for Django app._files/analytics.js.download"></script><script src="./Common testing scenarios for Django app._files/Ymh_quvZQHXWagzzRBDGpfy_j5A.js.download"></script><script src="./Common testing scenarios for Django app._files/js"></script><link rel="icon" href="https://www.agiliq.com/assets/images/favicon.ico" type="image/x-icon">
<!--  seo tags -->
<link rel="shortcut icon" type="image/png" href="https://www.agiliq.com/assets/images/icon-196x196.png">
<link rel="shortcut icon" sizes="196x196" href="https://www.agiliq.com/assets/images/icon-196x196.png">
<link rel="apple-touch-icon" href="https://www.agiliq.com/assets/images/icon-196x196.png">
<link rel="canonical" href="https://agiliq.com/blog/2013/04/common-testing-scenarios-for-django-app/">
<link rel="alternate" type="application/rss+xml" title="Agiliq" href="https://agiliq.com/feed.xml">
<link rel="sitemap" type="application/xml" title="Sitemap" href="https://agiliq.com/sitemap.xml">
<!-- /end -->

<link rel="stylesheet" href="./Common testing scenarios for Django app._files/css">
<link rel="stylesheet" href="./Common testing scenarios for Django app._files/style.css">

	<script src="./Common testing scenarios for Django app._files/embed.js.download" data-timestamp="1533206426312"></script><style type="text/css">:root a[href^="http://ad-apac.doubleclick.net/"], :root .GKJYXHBF2 > .GKJYXHBE2 > .GKJYXHBH5, :root a[href^="http://www.amazon.co.uk/exec/obidos/external-search?"], :root #\5f _mom_ad_2, :root #rhs_block .mod > .luhb-div > div[data-async-type="updateHotelBookingModule"], :root #\5f _admvnlb_modal_container, :root #MAIN.ShowTopic > .ad, :root a[href^="http://pubads.g.doubleclick.net/"], :root .GB3L-QEDGY .GB3L-QEDF- > .GB3L-QEDE-, :root #main_col > #center_col div[style="font-size:14px;margin:0 4px;padding:1px 5px;background:#fff7ed"], :root div[class*="-storyBodyAd-"], :root #center_col > #main > .dfrd > .mnr-c > .c._oc._zs, :root a[href^="http://ul.to/ref/"], :root #\5f _nq__hh[style="display:block!important"], :root a[href^="http://cdn.adstract.com/"], :root a[href^="//tracking.content-recommendation.net/"][href*="/sponsored/click.html?"], :root div[class^="ads-partner-"], :root #\5f _mom_ad_12, :root a[href^="http://lp.ncdownloader.com/"], :root a[href^="https://fileboom.me/pr/"], :root .inlineNewsletterSubscription + .inlineNewsletterSubscription div[class$="_item"], :root div[id^="google_ads_iframe_"], :root #ads > .dose > .dosesingle, :root a[href^="http://3wr110.net/"], :root a[href^="http://bestorican.com/"], :root div[id^="ad_script_"], :root a[href^="http://get.slickvpn.com/"], :root .gbfwa > div[class$="_item"], :root #assetsListings[style="display: block;"], :root #center_col > #\5f Emc, :root a[href^="http://marketgid.com"], :root #rhs_block > ol > .rhsvw > .kp-blk > .xpdopen > ._OKe > ol > ._DJe > .luhb-div, :root a[href^="http://go.mobisla.com/"], :root #center_col > #res > #topstuff + #search > div > #ires > #rso > #flun, :root a[href^="http://www.webtrackerplus.com/"], :root a[href^="http://www.affbuzzads.com/affiliate/"], :root #center_col > #resultStats + #tads, :root #main-content > [style="padding:10px 0 0 0 !important;"], :root #center_col > #resultStats + #tads + #res + #tads, :root #cnt #center_col > #taw > #tvcap > .c._oc._Lp, :root a[href^="http://www.paddypower.com/?AFF_ID="], :root a[onmousedown^="this.href='http://staffpicks.outbrain.com/network/redir?"][target="_blank"], :root #center_col > #resultStats + div + #res + #tads, :root div[id^="crt-"][style], :root div[class^="Ad__container"], :root a[href^="http://centertrust.xyz/"], :root a[href^="http://g1.v.fwmrm.net/ad/"], :root a[href^="http://www.fbooksluts.com/"], :root #center_col > #resultStats + div[style="border:1px solid #dedede;margin-bottom:11px;padding:5px 7px 5px 6px"], :root a[href^="http://ads.integral-marketing.com/"], :root div[id^="advads_"], :root a[data-obtrack^="http://paid.outbrain.com/network/redir?"], :root .__y_inner > .__y_item, :root div[id^="ads300_100-widget"], :root #center_col > #taw > #tvcap > .rscontainer, :root #center_col > div[style="font-size:14px;margin-right:0;min-height:5px"] > div[style="font-size:14px;margin:0 4px;padding:1px 5px;background:#fff8e7"], :root div[id^="MarketGid"], :root a[href^="https://www.financeads.net/tc.php?"], :root #cnt #center_col > #res > #topstuff > .ts, :root #content > #center > .dose > .dosesingle, :root a[href^="http://www.text-link-ads.com/"], :root #content > #right > .dose > .dosesingle, :root #flowplayer > div[style="position: absolute; width: 300px; height: 275px; left: 222.5px; top: 85px; z-index: 999;"], :root a[href^="http://ads.betfair.com/redirect.aspx?"], :root #flowplayer > div[style="z-index: 208; position: absolute; width: 300px; height: 275px; left: 222.5px; top: 85px;"], :root a[href*="emprestimo.eu"], :root #header + #content > #left > #rlblock_left, :root .__zinit .__y_item, :root a[href^="//40ceexln7929.com/"], :root #mbEnd[cellspacing="0"][cellpadding="0"], :root a[href^="http://banners.victor.com/processing/"], :root #mn #center_col > div > h2.spon:first-child, :root .ch[onclick="ga(this,event)"], :root a[href^="//go.vedohd.org/"], :root #mn #center_col > div > h2.spon:first-child + ol:last-child, :root a[href^="http://affiliate.coral.co.uk/processing/"], :root div[id^="yandex_ad"], :root #mn div[style="position:relative"] > #center_col > ._Ak, :root a[href*=".clksite.com/"], :root #mn div[style="position:relative"] > #center_col > div > ._dPg, :root .__yinit .__y_item, :root a[href^="http://finaljuyu.com/"], :root div[id^="mainads"], :root #rhs_block > .ts[cellspacing="0"][cellpadding="0"][style="padding:0"], :root #resultspanel > #topads, :root #rhs_block > #mbEnd, :root #rhs_block .mod > .gws-local-hotels__booking-module, :root #rhs_block .xpdopen > ._OKe > div > .mod > ._yYf, :root a[href^="http://data.ad.yieldmanager.net/"], :root .mw > #rcnt > #center_col > #taw > #tvcap > .c, :root #rhs_block > script + .c._oc._Ve.rhsvw, :root a[data-redirect^="https://paid.outbrain.com/network/redir?"], :root a[href^="http://track.adform.net/"], :root #tads + div + .c, :root #rhswrapper > #rhssection[border="0"][bgcolor="#ffffff"], :root a[href^="http://admingame.info/"], :root #ssmiwdiv[jsdisplay], :root a[href^="http://www.dealcent.com/register.php?affid="], :root #topstuff > #tads, :root .GFYY1SVD2 > .GFYY1SVC2 > .GFYY1SVF5, :root a[href^="http://www.linkbucks.com/referral/"], :root .GHOFUQ5BG2 > .GHOFUQ5BF2 > .GHOFUQ5BG5, :root .GFYY1SVE2 > .GFYY1SVD2 > .GFYY1SVG5, :root .jobs-information-call-to-action + .jobs-information-call-to-action div[class$="_item"], :root a[href^="https://ad.atdmt.com/"], :root a[href^="https://ads.ad4game.com/"], :root .__ywvr .__y_item, :root a[href^="//00ae8b5a9c1d597.com/"], :root a[href*=".qertewrt.com/"], :root a[href^="http://www.terraclicks.com/"], :root .GJJKPX2N1 > .GJJKPX2M1 > .GJJKPX2P4, :root .GPMV2XEDA2 > .GPMV2XEDP1 > .GPMV2XEDJBB, :root a[href^="http://aff.ironsocket.com/"], :root .Mpopup + #Mad > #MadZone, :root aside[itemtype="https://schema.org/WPAdBlock"], :root .__y_elastic .__y_item, :root a[href^="http://www.adxpansion.com"], :root .__ywl .__y_item, :root .l-container > #fishtank, :root .icons-rss-feed + .icons-rss-feed div[class$="_item"], :root a[href^="http://dethao.com/"], :root .lads[width="100%"][style="background:#FFF8DD"], :root iframe[src^="http://cdn2.adexprt.com/"], :root .mod > ._jH + .rscontainer, :root a[href^="http://clicks.binarypromos.com/"], :root .mw > #rcnt > #center_col > #taw > .c, :root .nrelate .nr_partner, :root a[href^="http://tezfiles.com/pr/"], :root .ob_container .item-container-obpd, :root a[href^="http://partner.sbaffiliates.com/"], :root a[href^="http://www.firstload.com/affiliate/"], :root a[href^="http://www.myfreepaysite.com/sfw_int.php?aid"], :root a[href^="//srv.buysellads.com/"], :root a[href^="http://pwrads.net/"], :root .ob_dual_right > .ob_ads_header ~ .odb_div, :root .plistaList > .itemLinkPET, :root a[href^="http://www.download-provider.org/"], :root a[href^="//88d7b6aa44fb8eb.com/"], :root .plistaList > .plista_widget_underArticle_item[data-type="pet"], :root .plista_widget_belowArticleRelaunch_item[data-type="pet"], :root a[href^="http://www.pinkvisualgames.com/?revid="], :root .ra[align="left"][width="30%"], :root a[href^="http://ads.affbuzzads.com/"], :root a[href^="http://promos.bwin.com/"], :root a[href^="http://tracker.mybroadband.co.za/"], :root .ra[align="right"][width="30%"], :root a[href^="http://bs.serving-sys.com/"], :root a[href^="http://api.content.ad/"], :root a[href^="https://www.googleadservices.com/pagead/aclk?"], :root .ra[width="30%"][align="right"] + table[width="70%"][cellpadding="0"], :root a[href^="http://n217adserv.com/"], :root .rc-cta[data-target], :root .rhsvw[style="background-color:#fff;margin:0 0 14px;padding-bottom:1px;padding-top:1px;"], :root .widget-pane-section-result[data-result-ad-type], :root a[href^="http://adserver.adtechus.com/"], :root .rscontainer > .ellip, :root .section-result[data-result-ad-type], :root .trc_rbox .syndicatedItem, :root .trc_rbox_border_elm .syndicatedItem, :root a[href^="http://taboola-"][href*="/redirect.php?app.type="], :root .trc_rbox_div .syndicatedItem, :root .trc_rbox_div .syndicatedItemUB, :root div[id^="div_openx_ad_"], :root .trc_rbox_div a[target="_blank"][href^="http://tab"], :root a[href^="//porngames.adult/?SID="], :root a[href^="http://engine.newsmaxfeednetwork.com/"], :root a[href^="https://www.camsoda.com/enter.php?id="], :root a[href*="=exoclick"], :root a[href^="http://ddownload39.club/"], :root .trc_related_container div[data-item-syndicated="true"], :root a[href^="http://refer.webhostingbuzz.com/"], :root a[href^="https://dcs.adgear.com/clicks/"], :root AD-TRIPLE-BOX, :root ADS-RIGHT, :root a[href^="http://campaign.bharatmatrimony.com/track/"], :root a[href*="/adServe/banners?"], :root a[href^="https://www.secureupload.eu/suprerefid="], :root AFS-AD, :root a[href^="http://www.myvpn.pro/"], :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"], :root AMP-AD, :root A[href^="https://www.friendlyduck.com/AF_"], :root a[href^="http://server.cpmstar.com/click.aspx?poolid="], :root a[href^="http://dwn.pushtraffic.net/"], :root DFP-AD, :root div[id^="advads-"], :root a[href^="http://buysellads.com/"], :root LEADERBOARD-AD, :root a[href^="http://sharesuper.info/"], :root [ad-id^="googlead"], :root a[href^="http://www.ringtonematcher.com/"], :root [id*="MGWrap"], :root a[href^="//ads.ad-center.com/"], :root a[href^="http://websitedhoome.com/"], :root [id*="MarketGid"], :root [id*="ScriptRoot"], :root a[href="http://track.freemmo2017.com/"], :root [id^="bunyad_ads_"], :root a[href^="http://www.seekbang.com/cs/"], :root a[onmousedown^="this.href='http://staffpicks.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="http://games.ucoz.ru/"][target="_blank"], :root [lazy-ad="lefttop_banner"], :root [onclick*="content.ad/"], :root a[href^="http://see-work.info/"], :root a[href^="http://www.graboid.com/affiliates/"], :root a[href^="http://papi.mynativeplatform.com:80/pub2/"], :root [onclick^="window.open('http://adultfriendfinder.com/search/"], :root a[href^="http://www.ducksnetwork.com/"], :root a[data-oburl^="http://paid.outbrain.com/network/redir?"], :root a[href^="https://atomidownload.com/"], :root a[data-oburl^="https://paid.outbrain.com/network/redir?"], :root a[data-redirect^="http://click.plista.com/pets"], :root a[data-redirect^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://go.ad2up.com/"], :root a[href^="http://adtransfer.net/"], :root a[href^="http://adclick.g.doubleclick.net/"], :root a[data-redirect^="this.href='http://paid.outbrain.com/network/redir?"], :root div[class*="_AdInArticle_"], :root a[href^="https://track.clickmoi.xyz/"], :root a[data-url^="http://paid.outbrain.com/network/redir?"], :root a[data-url^="http://paid.outbrain.com/network/redir?"] + .author, :root a[href^="http://ad.yieldmanager.com/"], :root a[href^="http://www.myfreepaysite.com/sfw.php?aid"], :root a[href^="http://lp.ezdownloadpro.info/"], :root a[data-widget-outbrain-redirect^="http://paid.outbrain.com/network/redir?"], :root a[href$="/vghd.shtml"], :root a[href^="http://amzn.to/"] > img[src^="data"], :root a[href*=".adk2x.com/"], :root a[href^="//z6naousb.com/"], :root a[href^="//5e1fcb75b6d662d.com/"], :root a[href*=".adsrv.eacdn.com/"] > img, :root a[href^="//www.mgid.com/"], :root a[href^="http://www.clkads.com/adServe/"], :root a[href^="http://ad.doubleclick.net/"], :root div[id^="ad-position-"], :root a[href*=".bang.com/"][href*="&aff="], :root a[href*=".clkcln.com/"], :root a[href^="http://guideways.info/"], :root a[href*=".ichlnk.com/"], :root a[href*=".inclk.com/"], :root a[href*=".intab.fun/"], :root a[href*=".revimedia.com/"], :root a[href*=".trust.zone"], :root a[href^="http://www.1clickmoviedownloader.info/"], :root div[id^="dfp-ad-"], :root a[href*="/adrotate-out.php?"], :root a[href^="http://xtgem.com/click?"], :root a[href^="https://servedbyadbutler.com/"], :root a[href*="/cmd.php?ad="], :root a[href*="/servlet/click/zone?"], :root a[href^="http://ryushare.com/affiliate.python"], :root a[href*="5iclx7wa4q.com"], :root a[href^="http://feedads.g.doubleclick.net/"], :root a[href*="=Adtracker"], :root a[href^="http://www.downloadweb.org/"], :root a[href^="http://affiliates.score-affiliates.com/"], :root a[href*="=adscript"], :root iframe[id^="google_ads_frame"], :root a[href*="a2g-secure.com"], :root a[href*="ad2upapp.com/"], :root a[href*="googleme.eu"], :root a[href*="letsadvertisetogether.com"], :root a[href*="onclkds."], :root a[href^="http://www.streamtunerhd.com/signup?"], :root a[href^="http://bonusfapturbo.nmvsite.com/"], :root a[href*="pussl3.com"], :root a[href^=" http://ads.ad-center.com/"], :root a[href^=" http://n47adshostnet.com/"], :root div[id^="ads300_250-widget"], :root a[href^=" http://www.sex.com/"][href*="&utm_"], :root a[href^="//adbit.co/?a=Advertise&"], :root a[href^="http://secure.signup-way.com/"], :root a[href^="http://landingpagegenius.com/"], :root a[href^="//api.ad-goi.com/"], :root a[href^="//bwnjijl7w.com/"], :root a[href^="//db52cc91beabf7e8.com/"], :root a[href^="http://tracking.deltamediallc.com/"], :root a[href^="//go.onclasrv.com/"], :root a[href^="//jsmptjmp.com/"], :root a[href^="http://www.revenuehits.com/"], :root a[href^="//medleyads.com/spot/"], :root a[href^="http://onclickads.net/"], :root a[href^="//nlkdom.com/"], :root a[href^="http://click.plista.com/pets"], :root a[href^="http://www.streamate.com/exports/"], :root a[href^="//t.MtagMonetizationA.com/"], :root a[href^="http://1phads.com/"], :root div[id^="ads250_250-widget"], :root a[href^="http://2pxg8bcf.top/"], :root a[href^="http://www.clickansave.net/"], :root a[href^="http://360ads.go2cloud.org/"], :root a[href^="http://9nl.es/"], :root a[href^="http://NowDownloadAll.com"], :root a[href^="http://www.mysuperpharm.com/"], :root a[href^="http://www.sex.com/videos/?utm_"], :root a[href^="http://a.adquantix.com/"], :root a[href^="http://abc2.mobile-10.com/"], :root a[href^="http://ad-emea.doubleclick.net/"], :root a[href^="http://ad.au.doubleclick.net/"], :root a[href^="http://adexprt.me/"], :root a[href^="http://adf.ly/?id="], :root a[href^="http://api.ringtonematcher.com/"], :root a[href^="http://adfarm.mediaplex.com/"], :root a[href^="http://www.babylon.com/welcome/index?affID"], :root a[href^="http://adserving.unibet.com/"], :root a[href^="https://secure.adnxs.com/clktrb?"], :root a[href^="http://adlev.neodatagroup.com/"], :root a[href^="http://adprovider.adlure.net/"], :root a[href^="http://pan.adraccoon.com?"], :root div[id^="lazyad-"], :root a[href^="http://bcp.crwdcntrl.net/"], :root a[href^="http://adrunnr.com/"], :root a[href^="http://www.fpcTraffic2.com/blind/in.cgi?"], :root a[href^="http://ads.activtrades.com/"], :root a[href^="http://mmo123.co/"], :root a[href^="http://ads.ad-center.com/"], :root a[href^="http://ads.expekt.com/affiliates/"], :root a[href^="http://zevera.com/afi.html"], :root a[href^="http://ads.sprintrade.com/"], :root a[href^="http://ads.pheedo.com/"], :root a[href^="http://ads2.williamhill.com/redirect.aspx?"], :root a[href^="http://adserver.adtech.de/"], :root a[href^="http://www.1clickdownloader.com/"], :root a[href^="http://cdn3.adbrau.com/"], :root a[href^="http://adserver.itsfogo.com/"], :root a[href^="http://adserving.liveuniversenetwork.com/"], :root a[href^="http://adsrv.keycaptcha.com"], :root a[href^="http://adtrack123.pl/"], :root a[href^="http://green.trafficinvest.com/"], :root a[href^="http://clickserv.sitescout.com/"], :root a[href^="http://www.adshost2.com/"], :root a[href^="http://adtrackone.eu/"], :root a[href^="http://adultfriendfinder.com/p/register.cgi?pid="], :root a[href^="http://linksnappy.com/?ref="], :root a[href^="http://affiliate.glbtracker.com/"], :root a[href^="http://affiliate.godaddy.com/"], :root a[href^="http://www.accuserveadsystem.com/accuserve-go.php?"], :root a[href^="http://lp.ilivid.com/"], :root a[href^="http://searchtabnew.com/"], :root a[href^="http://affiliates.pinnaclesports.com/processing/"], :root div[id^="block-views-topheader-ad-block-"], :root a[href^="http://www.gamebookers.com/cgi-bin/intro.cgi?"], :root a[href^="http://aflrm.com/"], :root a[href^="http://anonymous-net.com/"], :root a[href^="http://mojofun.info/"], :root a[href^="http://findersocket.com/"], :root iframe[src^="http://ad.yieldmanager.com/"], :root a[href^="http://at.atwola.com/"], :root a[href^="http://record.sportsbetaffiliates.com.au/"], :root a[href^="http://b.bestcompleteusa.info/"], :root a[href^="http://bc.vc/?r="], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="http://betahit.click/"], :root a[href^="http://hyperies.info/"], :root a[href^="http://bluehost.com/track/"], :root a[href^="http://databass.info/"], :root a[href^="http://c.actiondesk.com/"], :root a[href^="https://evaporate.pw/"], :root a[href^="http://c.jumia.io/"], :root a[href^="http://c.ketads.com/"], :root a[href^="http://www.bet365.com/"][href*="&affiliate="], :root a[href^="http://callville.xyz/"], :root a[href^="http://media.paddypower.com/redirect.aspx?"], :root a[href^="http://campaign.bharatmatrimony.com/cbstrack/"], :root a[href^="http://campeeks.com/"][href*="&utm_"], :root a[href^="http://casino-x.com/?partner"], :root a[href^="http://cdn.adsrvmedia.net/"], :root a[href^="http://web.adblade.com/"], :root a[href^="http://cdn3.adexprts.com/"], :root a[href^="http://go.oclaserver.com/"], :root a[href^="http://chaturbate.com/affiliates/"], :root script[src^="http://free-shoutbox.net/app/webroot/shoutbox/sb.php?shoutbox="] + #freeshoutbox_content, :root div[itemtype="http://schema.org/WPAdBlock"], :root a[href^="http://cinema.friendscout24.de?"], :root a[href^="http://click.guamwnvgashbkashawhgkhahshmashcas.pw/"], :root a[href^="http://www.down1oads.com/"], :root a[href^="http://clickandjoinyourgirl.com/"], :root a[href^="http://clicks.guamwnvgashbkashawhgkhahshmashcas.pw/"], :root a[href^="http://www.pheedo.com/"], :root a[href^="http://clk.directrev.com/"], :root a[href^="http://galleries.pinballpublishernetwork.com/"], :root div[class^="lifeOnwerAd"], :root a[target="_blank"][href^="http://api.taboola.com/"], :root a[href^="http://clkmon.com/adServe/"], :root a[href^="http://hdplugin.flashplayer-updates.com/"], :root a[href^="http://track.incognitovpn.com/"], :root div[id^="acm-ad-tag-"], :root a[href^="http://codec.codecm.com/"], :root a[href^="http://n.admagnet.net/"], :root a[href^="http://prochina.space/"], :root a[href^="http://connectlinking6.com/"], :root a[href^="http://contractallsticker.net/"], :root a[href^="http://wgpartner.com/"], :root a[href^="https://go.stripchat.com/"][href*="&campaignId="], :root a[href^="http://cpaway.afftrack.com/"], :root a[href^="http://cwcams.com/landing/click/"], :root a[href^="http://d2.zedo.com/"], :root a[href^="http://data.committeemenencyclopedicrepertory.info/"], :root a[href^="https://affiliates.bet-at-home.com/processing/"], :root div[class^="Ad__bigBox"], :root a[href^="http://data.linoleictanzaniatitanic.com/"], :root div[itemtype="http://www.schema.org/WPAdBlock"], :root a[href^="http://dftrck.com/"], :root a[href^="http://down1oads.com/"], :root a[href^="http://download-performance.com/"], :root a[href^="http://duckcash.eu/"], :root a[href^="https://bs.serving-sys.com"], :root a[href^="http://www.myfreecams.com/?co_id="][href*="&track="], :root a[href^="http://easydownload4you.com/"], :root a[href^="http://www.moneyducks.com/"], :root a[href^="http://eclkmpsa.com/"], :root a[href^="http://elite-sex-finder.com/?"], :root a[href^="http://elitefuckbook.com/"], :root a[href^="http://extra.bet365.com/"][href*="?affiliate="], :root a[href^="http://farm.plista.com/pets"], :root a[href^="http://freesoftwarelive.com/"], :root a[href^="http://webgirlz.online/landing/"], :root a[href^="http://fileloadr.com/"], :root a[href^="https://secure.eveonline.com/ft/?aid="], :root a[href^="http://fileupnow.rocks/"], :root a[href^="http://prousa.work/"], :root a[href^="http://fsoft4down.com/"], :root a[href^="http://track.trkvluum.com/"], :root a[href^="http://fusionads.net"], :root a[href^="http://galleries.securewebsiteaccess.com/"], :root a[href^="https://farm.plista.com/pets"], :root a[href^="http://gca.sh/user/register?ref="], :root a[href^="http://www.on2url.com/app/adtrack.asp"], :root a[href^="http://getlinksinaseconds.com/"], :root a[href^="http://go.seomojo.com/tracking202/"], :root a[href^="http://www.getyourguide.com/?partner_id="], :root a[href^="http://goldmoney.com/?gmrefcode="], :root a[href^="http://greensmoke.com/"], :root a[href^="http://hd-plugins.com/download/"], :root a[href^="http://hpn.houzz.com/"], :root a[href^="http://tracking.crazylead.com/"], :root a[href^="http://hyperlinksecure.com/go/"], :root a[href^="http://imads.integral-marketing.com/"], :root a[href^="http://www.tirerack.com/affiliates/"], :root a[href^="http://install.securewebsiteaccess.com/"], :root a[href^="http://secure.signup-page.com/"], :root a[href^="http://www.brightwheel.info/"], :root a[href^="http://internalredirect.site/"], :root a[href^="http://istri.it/?"], :root a[href^="http://jobitem.org/"], :root a[href^="http://liversely.com/"], :root a[href^="http://join3.bannedsextapes.com/track/"], :root a[href^="http://k2s.cc/code/"], :root a[href^="http://tracking.toroadvertising.com/"], :root a[href^="http://k2s.cc/pr/"], :root a[href^="http://keep2share.cc/pr/"], :root a[href^="http://latestdownloads.net/download.php?"], :root a[href^="https://ad.doubleclick.net/"], :root div[id^="ADV-SLOT-"], :root a[href^="http://liversely.net/"], :root a[href^="http://t.mdn2015x2.com/"], :root a[href^="http://mgid.com/"], :root a[href^="http://www.freefilesdownloader.com/"], :root a[href^="http://www.quick-torrent.com/download.html?aff"], :root a[href^="http://mo8mwxi1.com/"], :root div[class^="gemini-ad"], :root a[href^="http://online.ladbrokes.com/promoRedirect?"], :root a[href^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://track.affiliatenetwork.co.za/"], :root a[href^="http://pokershibes.com/index.php?ref="], :root a[href^="http://www.friendlyadvertisements.com/"], :root a[href^="https://www.spyoff.com/"], :root a[href^="http://prochina.link/"], :root a[href^="http://record.betsafe.com/"], :root a[href^="http://record.commissionking.com/"], :root a[href^="http://rekoverr.com/"], :root a[href^="http://secure.hostgator.com/~affiliat/"], :root a[href^="http://serve.williamhill.com/promoRedirect?"], :root a[href^="http://servicegetbook.net/"], :root a[href^="http://srvpub.com/"], :root a[href^="http://stateresolver.link/"], :root a[href^="http://www.drowle.com/"], :root a[href^="https://keep2share.cc/pr/"], :root a[href^="http://steel.starflavor.bid/"], :root a[href^="https://www.adskeeper.co.uk/"], :root a[href^="http://syndication.exoclick.com/"], :root a[href^="https://www.firstload.com/affiliate/"], :root a[href^="http://t.mdn2015x1.com/"], :root a[href^="http://t.mdn2015x3.com/"], :root a[href^="http://t.wowtrk.com/"], :root a[href^="http://tour.affbuzzads.com/"], :root div[id^="ad-div-"], :root a[href^="http://uploaded.net/ref/"], :root a[href^="http://us.marketgid.com"], :root a[href^="http://webtrackerplus.com/"], :root a[href^="http://wopertific.info/"], :root a[href^="http://www.123-reg.co.uk/affiliate2.cgi"], :root div[id^="cns_ads_"], :root a[href^="http://www.TwinPlan.com/AF_"], :root a[href^="http://www.afgr3.com/"], :root a[href^="http://www.twinplan.com/AF_"], :root a[href^="http://www.adbrite.com/mb/commerce/purchase_form.php?"], :root a[href^="http://www.adskeeper.co.uk/"], :root a[href^="http://www.wantstraffic.com/"], :root a[href^="https://understandsolar.com/signup/?lead_source="][href*="&tracking_code="], :root a[href^="http://www.affiliates1128.com/processing/"], :root a[href^="http://www.downloadplayer1.com/"], :root a[href^="http://www.badoink.com/go.php?"], :root a[href^="http://www.bet365.com/"][href*="?affiliate="], :root a[href^="http://www.bitlord.me/share/"], :root a[href^="http://www.bluehost.com/track/"] > img, :root bottomadblock, :root a[href^="http://www.cash-duck.com/"], :root a[href^="https://windscribe.com/promo/"], :root a[href^="http://www.cdjapan.co.jp/aff/click.cgi/"], :root a[href^="http://yads.zedo.com/"], :root a[href^="http://www.coinducks.com/"], :root a[href^="http://www.dl-provider.com/search/"], :root a[href^="http://www.downloadthesefiles.com/"], :root a[href^="http://www.duckcash.eu/"], :root a[href^="http://www.duckssolutions.com/"], :root a[href^="http://www.easydownloadnow.com/"], :root a[href^="http://www.epicgameads.com/"], :root a[href^="http://www.faceporn.net/free?"], :root a[href^="http://www.fducks.com/"], :root a[href^="https://torguard.net/aff.php"], :root a[href^="http://www.firstclass-download.com/"], :root a[href^="http://www.firstload.de/affiliate/"], :root a[href^="http://www.fonts.com/BannerScript/"], :root a[href^="http://www.flashx.tv/downloadthis"], :root a[href^="http://www.fleshlight.com/"], :root a[href^="http://www.friendlyquacks.com/"], :root a[href^="http://www.greenmangaming.com/?tap_a="], :root a[href^="https://www.goldenfrog.com/vyprvpn?offer_id="][href*="&aff_id="], :root a[href^="http://www.hitcpm.com/"], :root a[href^="https://pubads.g.doubleclick.net/"], :root a[href^="http://www.idownloadplay.com/"], :root a[href^="http://www.incredimail.com/?id="], :root a[href^="https://dediseedbox.com/clients/aff.php?"], :root a[href^="https://tracking.truthfinder.com/?a="], :root a[href^="http://www.installads.net/"], :root a[href^="http://www.ireel.com/signup?ref"], :root a[href^="http://www.liutilities.com/"], :root a[href^="http://www.pinkvisualpad.com/?revid="], :root a[href^="http://www.liversely.net/"], :root a[href^="http://www.menaon.com/installs/"], :root a[href^="http://www.mobileandinternetadvertising.com/"], :root a[href^="http://www.my-dirty-hobby.com/?sub="], :root a[href^="http://www.plus500.com/?id="], :root a[href^="http://www.ragazzeinvendita.com/?rcid="], :root a[href^="http://www.richducks.com/"], :root a[href^="http://www.roboform.com/php/land.php"], :root a[href^="http://www.securegfm.com/"], :root a[href^="http://www.sex.com/?utm_"], :root a[href^="http://www.sex.com/pics/?utm_"], :root a[href^="http://www.urmediazone.com/signup"], :root div[class^="Ad__adContainer"], :root a[href^="http://www.sexgangsters.com/?pid="], :root a[href^="http://www.sfippa.com/"], :root a[href^="http://www.socialsex.com/"], :root a[href^="http://www.torntv-downloader.com/"], :root a[href^="http://www.torntvdl.com/"], :root a[href^="http://www.uniblue.com/cm/"], :root a[href^="http://www.usearchmedia.com/signup?"], :root a[href^="http://www.xmediaserve.com/"], :root a[href^="http://www.yourfuckbook.com/?"], :root a[href^="http://www.zergnet.com/i/"], :root a[href^="http://www1.clickdownloader.com/"], :root a[href^="http://www5.smartadserver.com/call/pubjumpi/"], :root a[href^="http://wxdownloadmanager.com/dl/"], :root a[href^="http://xads.zedo.com/"], :root div[id^="div_ad_stack_"], :root a[href^="http://z1.zedo.com/"], :root a[href^="https://adhealers.com/"], :root a[href^="https://awentw.com/"], :root a[href^="https://betway.com/"][href*="&a="], :root a[href^="https://chaturbate.com/affiliates/"], :root a[href^="https://chaturbate.com/in/?track="], :root a[href^="https://click.plista.com/pets"], :root a[href^="https://dltags.com/"], :root a[href^="https://go.ad2up.com/"], :root a[href^="https://go.onclasrv.com/"], :root a[href^="https://intrev.co/"], :root a[href^="https://members.linkifier.com/public/affiliateLanding?refCode="], :root a[href^="https://mk-ads.com/"], :root a[href^="https://paid.outbrain.com/network/redir?"], :root a[href^="https://porndeals.com/?track="], :root a[href^="https://redirect.ero-advertising.com/"], :root a[href^="https://syndication.exoclick.com/splash.php?"], :root a[href^="https://t.mobtya.com/"], :root div[id^="ad-server-"], :root a[href^="https://trackjs.com/?utm_source"], :root a[href^="https://trklvs.com/"], :root a[href^="https://trust.zone/go/r.php?RID="], :root a[href^="https://www.bebi.com"], :root a[href^="https://www.camyou.com/?cam="][href*="&track="], :root a[href^="https://www.dsct1.com/"], :root a[href^="https://www.oboom.com/ad/"], :root a[href^="https://www.popads.net/users/"], :root a[href^="https://www.share-online.biz/affiliate/"], :root a[onmousedown^="this.href='/wp-content/embed-ad-content/"], :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"], :root div[id^="div-gpt-ad"], :root a[style="display:block;width:300px;min-height:250px"][href^="http://li.cnet.com/click?"], :root a[target="_blank"][onmousedown="this.href^='http://paid.outbrain.com/network/redir?"], :root aside[id^="adrotate_widgets-"], :root aside[id^="advads_ad_widget-"], :root aside[id^="div-gpt-ad"], :root div > [class][onclick*=".updateAnalyticsEvents"], :root div[class$="dealnews"] > .dealnews, :root div[class^="AdhesionAd_"], :root div[class^="BlockAdvert-"], :root div[class^="ResponsiveAd-"], :root div[class^="ad_border_"], :root div[class^="ad_position_"], :root div[class^="adpubs-"], :root div[class^="awpcp-random-ads"], :root div[class^="block-openx-"], :root div[class^="local-feed-banner-ads"], :root div[class^="proadszone-"], :root div[data-native_ad], :root div[data-spotim-slot], :root div[id^="YFBMSN"], :root div[id^="ad-cid-"], :root div[id^="adfox_"], :root div[id^="adrotate_widgets-"], :root div[id^="ads120_600-widget"], :root div[id^="ads300_600-widget"], :root div[id^="dfp-slot-"], :root div[id^="div-adtech-ad-"], :root div[id^="dmRosAdWrapper"], :root div[id^="google_dfp_"], :root div[id^="proadszone-"], :root div[id^="q1-adset-"], :root div[id^="zergnet-widget"], :root iframe[id^="google_ads_iframe"], :root iframe[src^="http://cdn1.adexprt.com/"], :root iframe[src^="http://static.mozo.com.au/strips/"], :root img[alt^="Fuckbook"], :root input[onclick^="window.open('http://www.friendlyduck.com/"], :root input[onclick^="window.open('http://www.FriendlyDuck.com/"], :root p[id^="div-gpt-ad-"], :root td[valign="top"] > .mainmenu[style="padding:10px 0 0 0 !important;"], :root topadblock { display: none !important; }</style><link rel="preload" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.daad7ee8d40fd7c6ef2c9a8252e27a53.css"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.e63a160a6bfb2f2953b5059c50baaf15.js"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.903fa97e1c37be009b5e3f238b88cd7f.js"><link rel="preload" as="script" href="https://disqus.com/next/config.js"><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style><script src="./Common testing scenarios for Django app._files/alfalfa.4a5fcca1fe50a757044dfd331b660625.js.download" async="" charset="UTF-8"></script></head>
	<body class="green" data-spy="scroll" data-target=".js-scrollspy">
		
	<div class="offcanvas visible-xs">
		<ul class="offcanvas__nav">
			
				<li><a href="https://www.agiliq.com/blog/">Blog</a></li>
			
				<li><a href="https://books.agiliq.com/en/latest/">Books</a></li>
			
				<li><a href="https://www.agiliq.com/about/">About Us</a></li>
			
				<li><a href="https://www.agiliq.com/contact/">Contact</a></li>
			
		</ul><!-- /.offcanvas__nav -->
	</div><!-- /.offcanvas -->



	<header class="site-header fixed-header">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					
						<a href="https://www.agiliq.com/" class="site-header__logo">Agiliq</a>
					
					
						<ul class="site-header__nav hidden-xs">
							
								<li><a href="https://www.agiliq.com/blog/">Blog</a></li>
							
								<li><a href="https://books.agiliq.com/en/latest/">Books</a></li>
							
								<li><a href="https://www.agiliq.com/about/">About Us</a></li>
							
								<li><a href="https://www.agiliq.com/contact/">Contact</a></li>
							
						</ul><!-- /.site-header__nav -->
						<button class="offcanvas-toggle visible-xs">
							<span></span>
							<span></span>
							<span></span>
						</button><!-- /.offcanvas-toggle -->
					
				</div><!-- /.col -->
			</div><!-- /.row -->
		</div><!-- /.container -->
	</header><!-- /.site-header -->


		<div class="hero-subheader " "="">
			<div class="container">
				<div class="row ">
					<div class="col-md-7">
						<div class="align-container" data-mh="" style="height: 135px;">
							<div class="align-inner">
								
									<h1 class="hero-subheader__title">Common testing scenarios for Django app.</h1>
								
								
								
							</div><!-- /.align-inner -->
						</div><!-- /.align-container -->
					</div><!-- /.col -->
					
						<div class="col-md-4 col-md-offset-1 hidden-xs hidden-sm">
							<div class="align-container" data-mh="" style="height: 135px;">
								<div class="align-inner">
									<div class="hero-subheader__author">
										<p class="hero-subheader__author-title">
											<a href="https://www.agiliq.com/blog/2013/04/common-testing-scenarios-for-django-app/" class="btn btn--read-more">
												By akshar
												<i class="icon icon--arrow-right"></i>
											</a>
										</p><!-- /.hero-subheader__author-title -->
										<p>
											in
											
											
												testing
											
											
										</p>
									</div><!-- /.hero-subheader__author -->
								</div><!-- /.align-inner -->
							</div><!-- /.align-container -->
						</div><!-- /.col -->
					
				</div><!-- /.row -->
			</div><!-- /.container -->
		</div><!-- /.hero-subheader -->
		<div class="section">
			<div class="container">
				<div class="row">
					<div class="col-md-7">
						<div class="content">
							<p>People are often confused regarding what tests to write. Let’s look into some scenarios for which tests can be written.</p>

<p>##Setting up the project</p>

<p>We start a Django project inside a virtual environment. In this post we would be using django 1.4.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(dj)~/play/dj$ django-admin.py startproject testcases
</code></pre></div></div>

<p>Let’s start an app named <code class="highlighter-rouge">blog</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(dj)~/play/dj/testcases$ python manage.py startapp blog
</code></pre></div></div>

<p>We will have the following model in <code class="highlighter-rouge">blog/models.py</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class BlogEntry(models.Model):
    title = models.CharField(max_length=100)
    text = models.TextField()
    is_published = models.BooleanField(default=True)
    user = models.ForeignKey(User)
</code></pre></div></div>

<p>We will do test driven development which requires:</p>

<ul>
  <li>Thinking about our assumption.</li>
  <li>Writing the test to satisfy that assumption.</li>
  <li>Run the test and it will fail since we won’t have view written till this point.</li>
  <li>Adding the view.</li>
  <li>Run the test and fixing the view or anything else till our test passes.</li>
</ul>

<p>If I could not explain the project structure properly, you can find the complete project <a href="https://github.com/akshar-raaj/Testing-in-Django">here</a>.</p>

<p>##First test</p>

<p>We want a page which shows all blog entries at url <code class="highlighter-rouge">/blog/entries/</code>.</p>

<p>We need following line in urls i.e <code class="highlighter-rouge">testcases/urls.py</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>url(r'^blog/', include('blog.urls')),
</code></pre></div></div>

<p><code class="highlighter-rouge">blog/urls.py</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>url(r'^entries/$', 'blog.views.entries', name='entries'),
</code></pre></div></div>

<p>Let’s add a test which satisfies our assumption.</p>

<p>Every app we create gets a <code class="highlighter-rouge">tests.py</code> where we can put our tests. You can remove the simple addition test generated by default by Django.</p>

<p><code class="highlighter-rouge">blog/tests.py</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from django.test import TestCase
from django.test.client import Client

class BlogEntriesTest(TestCase):

    def setUp(self):
        self.c = Client()

    def test_entries_access(self):
        response = self.c.get('/blog/entries/')
        self.assertEqual(response.status_code, 200)
</code></pre></div></div>

<p>###Explanation</p>

<ul>
  <li>We need a test class which is <code class="highlighter-rouge">BlogEntriesTest</code>. Any test class we write must subclass <strong>TestCase</strong> which is defined in <code class="highlighter-rouge">django.test</code>.</li>
  <li>Actual tests go in methods defined on the test class. So, our test goes in <code class="highlighter-rouge">test_entries_access</code>. Every test method name must start with <strong>test</strong> for it to be found by the django test runner.</li>
  <li>Before every test, <code class="highlighter-rouge">setUp</code> method is run. So anything which is common on all the test methods can go in <code class="highlighter-rouge">setUp</code>.</li>
  <li>We created a <code class="highlighter-rouge">Client</code> object in setUp. This object is needed to make <code class="highlighter-rouge">GET</code> or <code class="highlighter-rouge">POST</code> request. <code class="highlighter-rouge">Client</code> object simulates request to a url similar to a browser can. Since it is created in setUp, it will be available in all the test methods.</li>
  <li>From <code class="highlighter-rouge">test_entries_access</code>, we make a GET request to the url which we have defined. We capture the response in variable <strong>response</strong>.</li>
  <li>We are asserting that <code class="highlighter-rouge">status_code</code> of response must be 200 since we assumed this url to return a 200.</li>
</ul>

<p>###Running the test
Tests use a database. Since sqlite is faster than mysql or postgresql, we would use sqlite as the test database. You can continue using your any other database for development or production. We are only interested in running the tests using sqlite.</p>

<p><code class="highlighter-rouge">testcases/test_settings.py</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from settings import *
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'abc'
     }
}
</code></pre></div></div>

<p>Running the test.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python manage.py test blog --settings=testcases.test_settings
</code></pre></div></div>

<p><code class="highlighter-rouge">blog</code> says that only run the tests for app <code class="highlighter-rouge">blog</code>. Not providing this would run the tests for all the apps defined in INSTALLED_APPS which would take quite some time. Make sure that you have added <code class="highlighter-rouge">blog</code> to INSTALLED_APPS.</p>

<p><code class="highlighter-rouge">--settings</code> flag tells django test runner to use the specified settings file.</p>

<p><strong>And our test fails.</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR: test_entries_access (blog.tests.BlogEntriesTest)
----------------------------------------------------------------------
Traceback (most recent call last):
......
......
ViewDoesNotExist: Could not import blog.views.entries. View does not exist in module blog.views.

----------------------------------------------------------------------
Ran 1 test in 0.019s

FAILED (errors=1)
</code></pre></div></div>

<p>Because we have not written the view yet. We didn’t have to go to browser to check if this url works, our test does it for us.</p>

<p>We should test every url we want available in our project. So, that if some url breaks our test would tell that to us immediately.</p>

<p>###Adding the view</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from blog.models import BlogEntry
from django.shortcuts import render

def entries(request):
    entries = BlogEntry.objects.all()
    return render("blog/entries.html", {'entries': entries})
</code></pre></div></div>

<p>Make sure to add the template <code class="highlighter-rouge">blog/entries.html</code> in your template directory.</p>

<p>Run the test again.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python manage.py test blog --settings=testcases.test_settings

Ran 1 test in 0.019s

OK
Destroying test database for alias 'default'...
</code></pre></div></div>

<p>###Minor modification to test</p>

<p>Since we should not hardcode the urls, we will use <code class="highlighter-rouge">reverse</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_entries_access(self):
    response = self.c.get(reverse('entries'))
    self.assertEqual(response.status_code, 200)
</code></pre></div></div>

<p>Run the test again to make sure our change has not broken anything.</p>

<p>##Test that context is populated in template</p>

<p>We want to make sure that our expectation regarding number of visible blog entries on the page matches the result. Say we have two entries in the database then both of them should be shown on the page as per our view definition.</p>

<p>A blog must be associated with a user. So, we will create an instance of user in <code class="highlighter-rouge">setUp</code> because we would need this user in other tests as well.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def setUp(self):
    self.c = Client()
    self.user = User.objects.create_user(username="test", email="test@test.com", password="test")
</code></pre></div></div>

<p>###Testing the context</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_entries_template_context(self):
    #create few blog entries
    BlogEntry.objects.create(title='Test', text='Test', user=self.user)
    BlogEntry.objects.create(title='Test', text='Test', user=self.user)

    response = self.c.get(reverse('entries'))
    #assert that context contains as many entries as you expect
    self.assertEqual(len(response.context['entries']), 2)
</code></pre></div></div>

<p><code class="highlighter-rouge">response</code> contains an attribute <strong>context</strong> which is a dictionary containing the context sent to template.</p>

<p>###Assertion</p>
<ul>
  <li>We created two blogs and asserted that context contains both of them.</li>
</ul>

<p>This test is not much useful now. We will see how <code class="highlighter-rouge">response.context</code> becomes useful when we write a custom manager.</p>

<p>##Only logged in user must access create entry page.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_entry_create(self):
    response = self.c.get(reverse('entry_create'))
    self.assertEqual(response.status_code, 302)

    self.c.login(username='test', password='test')
    response = self.c.get(reverse('entry_create'))
    self.assertEqual(response.status_code, 200)
</code></pre></div></div>

<p>Run the test. We know it will fail because we have not written the view or the url yet.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python manage.py test blog --settings=testcases.test_settings

.....
ERROR: test_entry_create (blog.tests.BlogEntriesTest)
----------------------------------------------------------------------
Traceback (most recent call last):
....
NoReverseMatch: Reverse for 'entry_create' with arguments '()' and keyword arguments '{}' not found.
----------------------------------------------------------------------
Ran 3 tests in 0.051s

FAILED (errors=1)
</code></pre></div></div>

<p>###Explanation:</p>
<ul>
  <li>We expect a url with name <code class="highlighter-rouge">entry_create</code> to be available.</li>
  <li>A non-logged user should not be able to access this url and should be redirected to login urll. So, we assert that status code be 302.</li>
  <li>There is a <code class="highlighter-rouge">login</code> method defined on <code class="highlighter-rouge">Client</code>. So, we can call <code class="highlighter-rouge">self.c.login()</code>.</li>
  <li><code class="highlighter-rouge">login()</code> takes a username and password. You should provide credentials of some user already present in db. Remember we created an user in <code class="highlighter-rouge">setUp</code>. We pass the same credentials here.</li>
  <li>After this client i.e <code class="highlighter-rouge">self.c</code> starts behaving like a logged in user.</li>
  <li>Now client should be able to access create page and so we assert the status code as 200.</li>
</ul>

<p>Let’s start fixing this test.</p>

<p>Need to add following in <code class="highlighter-rouge">blog/urls.py</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>url(r'^entry/create/$', 'blog.views.entry_create', name='entry_create'),
</code></pre></div></div>

<p>Adding a modelform. This will be used in create view.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">class</span> <span class="n">BlogEntryForm</span><span class="p">(</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">class</span> <span class="n">Meta</span><span class="p">:</span>
        <span class="k">model</span> <span class="p">=</span> <span class="n">BlogEntry</span>
</code></pre></div></div>

<p>Adding the view</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def entry_create(request):
    form = BlogEntryForm()
    if request.method == "POST":
        form = BlogEntryForm(request.POST)
        if form.is_valid():
            return HttpResponseRedirect(reverse('entries'))
            form.save()
    return render(request, "blog/entry_create.html", {'form': form})
</code></pre></div></div>

<p>Make sure to create the template. And then run the test.</p>

<p>You will still see an error.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>File "/home/akshar/play/dj/testcases/blog/tests.py", line 30, in test_entry_create
    self.assertEqual(response.status_code, 302)
AssertionError: 200 != 302
</code></pre></div></div>

<p>Because we missed adding <code class="highlighter-rouge">login_required</code> to the view and even anonymous users are able to access this url. And hence they are getting a 200 instead of 302.</p>

<p>Let’s fix it by adding <code class="highlighter-rouge">login_required</code> decorator to <code class="highlighter-rouge">entry_create</code> view.</p>

<p>Run the test again and it should pass now.</p>

<p>##Test invalid form</p>

<p>So, we wrote <code class="highlighter-rouge">entry_create</code> with assumption that it will handle POST requests.</p>

<p>We want to make sure that this view doesn’t allow invalid POST and raises an exception in that case.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_invalid_entry_create(self):
    self.c.login(username='test', password='test')
    data = {'text': 'Test text'}
    response = self.c.post(reverse('entry_create'), data)
    self.assertEqual(response.status_code, 200)
    self.assertFormError(response, "form", "title", "This field is required.")
</code></pre></div></div>

<p>###Assertions:</p>

<ul>
  <li>Since we posted an invalid form, we expect to remain on the same page. So asserted for status code of 200.</li>
  <li>We expect an error to be present on the <code class="highlighter-rouge">title</code> field.</li>
</ul>

<p>##Test valid form</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_valid_entry_create(self):
    self.c.login(username='test', password='test')
    data = {'text': 'Test text', 'title': 'Test title'}
    data['user'] = self.user.id
    self.assertEqual(BlogEntry.objects.count(), 0)
    response = self.c.post(reverse('entry_create'), data)
    self.assertEqual(response.status_code, 302)
    self.assertEqual(BlogEntry.objects.count(), 1)
</code></pre></div></div>

<p>###Assertions:</p>

<ul>
  <li>Before posting we assert that there is no <code class="highlighter-rouge">BlogEntry</code> in the db.</li>
  <li>After posting we check that the user is redirected and so asserted for status code of 302</li>
  <li>We make sure that a <code class="highlighter-rouge">BlogEntry</code> is created in the database on post by checking that count of <code class="highlighter-rouge">BlogEntry</code> has been increased to 1.</li>
</ul>

<p>##Test custom manager methods</p>

<p>Suppose you find yourself writing the same filter multiple times for getting the blog entries which have is_published as True. In that case you would write a custom manager.</p>

<p>We will add the custom manager in models.py</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class PublishedBlogManager(models.Manager):
    def get_query_set(self, *args, **kwargs):
        return super(PublishedBlogManager, self).get_query_set(*args, **kwargs).filter(is_published=True)
</code></pre></div></div>

<p>Also we need to add this manager on <code class="highlighter-rouge">BlogEntry</code>. So, don’t forget to add next two lines to <code class="highlighter-rouge">BlogEntry</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>objects = models.Manager()
published = PublishedBlogManager()
</code></pre></div></div>

<p>Let’s write a test now:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_entry_custom_managers(self):
    BlogEntry.objects.create(title='Test', text='Test', user=self.user, is_published=False)
    BlogEntry.objects.create(title='Test', text='Test', user=self.user)
    self.assertEqual(BlogEntry.objects.count(), 2)
    self.assertEqual(BlogEntry.published.count(), 1)
</code></pre></div></div>

<p>###Assertions:</p>

<ul>
  <li>We created two entries. One with is_published as False, and another with True.</li>
  <li><code class="highlighter-rouge">objects</code> i.e default manager returns all the entries.</li>
  <li><code class="highlighter-rouge">published</code> i.e custom manager returns only entries which have <code class="highlighter-rouge">is_published=True</code>.</li>
</ul>

<p>###Using custom manager in <strong>test_entries_template_context</strong>:</p>

<p>Say now we decide that all entries should not be shown on list entries page. Only published entries should be shown.</p>

<p>Remember <code class="highlighter-rouge">test_entries_template_context</code>. We only created two blog entries in that test. Edit that test and create one more entry with <code class="highlighter-rouge">is_published=False</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_entries_template_context(self):
    #create few blog entries
    BlogEntry.objects.create(title='Test', text='Test', user=self.user)
    BlogEntry.objects.create(title='Test', text='Test', user=self.user)
    BlogEntry.objects.create(title='Test', text='Test', user=self.user, is_published=False)

    response = self.c.get(reverse('entries'))
    #assert that context contains only published entries
    self.assertEqual(len(response.context['entries']), 2)
</code></pre></div></div>

<p>We created three entries. Only two of them are published.</p>

<p>###Assertion:</p>
<ul>
  <li>Entries page should only show 2 entries.</li>
</ul>

<p>Run the test and it will fail.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>======================================================================
FAIL: test_entries_template_context (blog.tests.BlogEntriesTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/akshar/play/dj/testcases/blog/tests.py", line 29, in test_entries_template_context
    self.assertEqual(len(response.context['entries']), 2)
AssertionError: 3 != 2

----------------------------------------------------------------------
</code></pre></div></div>

<p>Happened because we forgot to change our view. Our view still says <code class="highlighter-rouge">BlogEntry.objects.all()</code>. We should change it to <code class="highlighter-rouge">BlogEntry.published.all()</code>. Make this change and the test will pass.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def entries(request):
    entries = BlogEntry.published.all()
    return render_to_response("blog/entries.html", {'entries': entries})
</code></pre></div></div>

<p>So, <strong>response.context</strong> helped us find that we do not show more entries than we should.</p>

<p>##Test for pagination</p>

<p>Suppose we expect maximum ten entries to be available on each page. There are 15 entries in the db, so first page should show 10 entries and the second page should show 5. If user tries to access the third page a 404 page should be shown.</p>

<p>Our decided url pattern for getting entries on a particular page:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>url(r'^entries/(?P&lt;page&gt;\d+)/$', 'blog.views.entries_page', name='entries_page')
</code></pre></div></div>

<p>Writing the test:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test_entries_page(self):
    for i in range(15):
        BlogEntry.objects.create(title="title", text="text", user=self.user, is_published=True)

    #access first page
    response = self.c.get(reverse("entries_page", args=[1,]))
    self.assertEqual(response.status_code, 200)
    self.assertEqual(len(response.context['entries']), 10)

    #access second page
    response = self.c.get(reverse("entries_page", args=[2,]))
    self.assertEqual(response.status_code, 200)
    self.assertEqual(len(response.context['entries']), 5)
</code></pre></div></div>

<p>Run the test and it will fail. Let’s add view to make it pass.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def entries_page(request, page):
    page = int(page)
    entries = BlogEntry.published.all()
    paginator = Paginator(entries, 10) #10 entries per page
    page_ = paginator.page(page)
    object_list = page_.object_list
    return render(request, "blog/entries_page.html", {"entries": object_list})
</code></pre></div></div>

<p>Test should pass now provided you have added the template.</p>

<p>Let’s try to access third page in the test. We need to add following in <code class="highlighter-rouge">test_entries_page</code> for that.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    #access third page
    response = self.c.get(reverse("entries_page", args=[3,]))
    self.assertEqual(response.status_code, 404)
</code></pre></div></div>

<p>Running the test raises an error.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>....
raise EmptyPage('That page contains no results')
EmptyPage: That page contains no results
</code></pre></div></div>

<p>We find that there is a bug in our view and any page which doesn’t contain entries is not being handled as we want. Let’s change our view:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def entries_page(request, page):
    page = int(page)
    entries = BlogEntry.published.all()
    paginator = Paginator(entries, 10) #10 entries per page
    if page &gt; paginator.num_pages:
        raise Http404()
    page_ = paginator.page(page)
    object_list = page_.object_list
    return render(request, "blog/entries_page.html", {"entries": object_list})
</code></pre></div></div>

<p>Run the test again.</p>

<p>If you have a 404 template defined then your test will pass. In this project we do not have a 404 template and so we get another exception</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR: test_entries_page (blog.tests.BlogEntriesTest)
----------------------------------------------------------------------
Traceback (most recent call last):
....
    raise TemplateDoesNotExist(name)
TemplateDoesNotExist: 404.html
</code></pre></div></div>

<p>So, let’s add a 404 template. Test passes once we do it.</p>

<p>So, this test also helped us find a missing 404 template.</p>

<p>##Test for static files</p>

<p>You can look at <a href="http://agiliq.com/blog/2013/03/serving-static-files-in-django/">our blog on static file</a> if you have some confusion regarding how static files are served in Django.</p>

<p>We will create a <code class="highlighter-rouge">static</code> directory in our app <code class="highlighter-rouge">blog</code> and will put an image in this directory. Let’s say this image is <code class="highlighter-rouge">default.jpg</code></p>

<p>Let’s add a test to make sure this image is found by django static file handlers. This test makes us confident that we can expect this image to be served at <code class="highlighter-rouge">default.jpg</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from django.contrib.staticfiles import finders
from django.contrib.staticfiles.storage import staticfiles_storage

def test_images(self):
    abs_path = finders.find('default.jpg')
    self.assertTrue(staticfiles_storage.exists(abs_path))
</code></pre></div></div>

<p>Run the test and it should pass.</p>

<p>You can view the complete project <a href="https://github.com/akshar-raaj/Testing-in-Django">here</a>.</p>

<div class="callout callout--success">
    <p>Thank you for reading the Agiliq blog. This article was writen by akshar on Apr 28, 2013 in
        
          <a href="https://www.agiliq.com/categories/#testing" rel="nofollow">testing</a>
      
      .
    </p>
    <p>You can <a href="https://www.agiliq.com/feed.xml">subscribe ⚛ to our blog</a>.</p>

    <p>We love building amazing apps for web and mobile for our clients. If you are looking for developmenrt help, <a href="https://www.agiliq.com/contact/">contact us today ✉</a>.</p>
</div>

<div class="callout callout--success">
  <p>
    Would you like to download 10+ free Django and Python books?
    <a href="https://books.agiliq.com/" target="_blank">
      Get them here
    </a>
  </p>
  <a href="https://books.agiliq.com/" target="_blank">
    <img src="./Common testing scenarios for Django app._files/book-covers-merged.png">
  </a>
</div>
<!-- json+ld -->
<script type="application/ld+json">
{  
   "@context":"http://schema.org",
   "@type":"TechArticle",
   "headline":"Common testing scenarios for Django app.",
   "genre":"",
   "keywords":"",
   "url":"https://www.agiliq.com",
   "datePublished":"2013-04-28",
   "dateModified":"2018-07-30",
   "author":{  
      "@type":"Person",
      "name":"akshar"
   },
   "publisher":{  
      "@type":"Organization",
      "name":"Agiliq Info Solutions India Pvt Ltd",
      "sameAs":[  
        "https://twitter.com/agiliqdotcom",
        "https://github.com/agiliq",
        "https://www.facebook.com/agiliq"
      ],
      "logo": {
      "@type": "ImageObject",
      "contentUrl": "https://www.agiliq.com/assets/images/logo.png",
      "url": "https://www.agiliq.com/"
    }
   },
   "image":{  
      "@type":"ImageObject",
      "contentUrl": "https://www.agiliq.com/assets/images/logo.png",
      "url":"https://www.agiliq.com",
      "width":"450",
      "height":"300"
   },
   "mainEntityOfPage":{  
      "@type":"WebPage",
      "@id":"https://www.agiliq.com"
   },
   "articleBody":"People are often confused regarding what tests to write. Let’s look into some scenarios for which tests can be written.##Setting up the projectWe start a Django project inside a virtual environment. In this post we would be using django 1.4.(dj)~/play/dj$ django-admin.py startproject testcasesLet’s start an app named blog.(dj)~/play/dj/testcases$ python manage.py startapp blogWe will have the following model in blog/models.py:class BlogEntry(models.Model):    title = models.CharField(max_length=100)    text = models.TextField()    is_published = models.BooleanField(default=True)    user = models.ForeignKey(User)We will do test driven development which requires:  Thinking about our assumption.  Writing the test to satisfy that assumption.  Run the test and it will fail since we won’t have view written till this point.  Adding the view.  Run the test and fixing the view or anything else till our test passes.If I could not explain the project structure properly, you can find the complete project here.##First testWe want a page which shows all blog entries at url /blog/entries/.We need following line in urls i.e testcases/urls.pyurl(r'^blog/', include('blog.urls')),blog/urls.pyurl(r'^entries/$', 'blog.views.entries', name='entries'),Let’s add a test which satisfies our assumption.Every app we create gets a tests.py where we can put our tests. You can remove the simple addition test generated by default by Django.blog/tests.pyfrom django.test import TestCasefrom django.test.client import Clientclass BlogEntriesTest(TestCase):    def setUp(self):        self.c = Client()    def test_entries_access(self):        response = self.c.get('/blog/entries/')        self.assertEqual(response.status_code, 200)###Explanation  We need a test class which is BlogEntriesTest. Any test class we write must subclass TestCase which is defined in django.test.  Actual tests go in methods defined on the test class. So, our test goes in test_entries_access. Every test method name must start with test for it to be found by the django test runner.  Before every test, setUp method is run. So anything which is common on all the test methods can go in setUp.  We created a Client object in setUp. This object is needed to make GET or POST request. Client object simulates request to a url similar to a browser can. Since it is created in setUp, it will be available in all the test methods.  From test_entries_access, we make a GET request to the url which we have defined. We capture the response in variable response.  We are asserting that status_code of response must be 200 since we assumed this url to return a 200.###Running the testTests use a database. Since sqlite is faster than mysql or postgresql, we would use sqlite as the test database. You can continue using your any other database for development or production. We are only interested in running the tests using sqlite.testcases/test_settings.pyfrom settings import *DATABASES = {    'default': {        'ENGINE': 'django.db.backends.sqlite3',        'NAME': 'abc'     }}Running the test.python manage.py test blog --settings=testcases.test_settingsblog says that only run the tests for app blog. Not providing this would run the tests for all the apps defined in INSTALLED_APPS which would take quite some time. Make sure that you have added blog to INSTALLED_APPS.--settings flag tells django test runner to use the specified settings file.And our test fails.ERROR: test_entries_access (blog.tests.BlogEntriesTest)----------------------------------------------------------------------Traceback (most recent call last):............ViewDoesNotExist: Could not import blog.views.entries. View does not exist in module blog.views.----------------------------------------------------------------------Ran 1 test in 0.019sFAILED (errors=1)Because we have not written the view yet. We didn’t have to go to browser to check if this url works, our test does it for us.We should test every url we want available in our project. So, that if some url breaks our test would tell that to us immediately.###Adding the viewfrom blog.models import BlogEntryfrom django.shortcuts import renderdef entries(request):    entries = BlogEntry.objects.all()    return render(&quot;blog/entries.html&quot;, {'entries': entries})Make sure to add the template blog/entries.html in your template directory.Run the test again.python manage.py test blog --settings=testcases.test_settingsRan 1 test in 0.019sOKDestroying test database for alias 'default'...###Minor modification to testSince we should not hardcode the urls, we will use reverse.def test_entries_access(self):    response = self.c.get(reverse('entries'))    self.assertEqual(response.status_code, 200)Run the test again to make sure our change has not broken anything.##Test that context is populated in templateWe want to make sure that our expectation regarding number of visible blog entries on the page matches the result. Say we have two entries in the database then both of them should be shown on the page as per our view definition.A blog must be associated with a user. So, we will create an instance of user in setUp because we would need this user in other tests as well.def setUp(self):    self.c = Client()    self.user = User.objects.create_user(username=&quot;test&quot;, email=&quot;test@test.com&quot;, password=&quot;test&quot;)###Testing the contextdef test_entries_template_context(self):    #create few blog entries    BlogEntry.objects.create(title='Test', text='Test', user=self.user)    BlogEntry.objects.create(title='Test', text='Test', user=self.user)    response = self.c.get(reverse('entries'))    #assert that context contains as many entries as you expect    self.assertEqual(len(response.context['entries']), 2)response contains an attribute context which is a dictionary containing the context sent to template.###Assertion  We created two blogs and asserted that context contains both of them.This test is not much useful now. We will see how response.context becomes useful when we write a custom manager.##Only logged in user must access create entry page.def test_entry_create(self):    response = self.c.get(reverse('entry_create'))    self.assertEqual(response.status_code, 302)    self.c.login(username='test', password='test')    response = self.c.get(reverse('entry_create'))    self.assertEqual(response.status_code, 200)Run the test. We know it will fail because we have not written the view or the url yet.python manage.py test blog --settings=testcases.test_settings.....ERROR: test_entry_create (blog.tests.BlogEntriesTest)----------------------------------------------------------------------Traceback (most recent call last):....NoReverseMatch: Reverse for 'entry_create' with arguments '()' and keyword arguments '{}' not found.----------------------------------------------------------------------Ran 3 tests in 0.051sFAILED (errors=1)###Explanation:  We expect a url with name entry_create to be available.  A non-logged user should not be able to access this url and should be redirected to login urll. So, we assert that status code be 302.  There is a login method defined on Client. So, we can call self.c.login().  login() takes a username and password. You should provide credentials of some user already present in db. Remember we created an user in setUp. We pass the same credentials here.  After this client i.e self.c starts behaving like a logged in user.  Now client should be able to access create page and so we assert the status code as 200.Let’s start fixing this test.Need to add following in blog/urls.pyurl(r'^entry/create/$', 'blog.views.entry_create', name='entry_create'),Adding a modelform. This will be used in create view.class BlogEntryForm(ModelForm):    class Meta:        model = BlogEntryAdding the viewdef entry_create(request):    form = BlogEntryForm()    if request.method == &quot;POST&quot;:        form = BlogEntryForm(request.POST)        if form.is_valid():            return HttpResponseRedirect(reverse('entries'))            form.save()    return render(request, &quot;blog/entry_create.html&quot;, {'form': form})Make sure to create the template. And then run the test.You will still see an error.File &quot;/home/akshar/play/dj/testcases/blog/tests.py&quot;, line 30, in test_entry_create    self.assertEqual(response.status_code, 302)AssertionError: 200 != 302Because we missed adding login_required to the view and even anonymous users are able to access this url. And hence they are getting a 200 instead of 302.Let’s fix it by adding login_required decorator to entry_create view.Run the test again and it should pass now.##Test invalid formSo, we wrote entry_create with assumption that it will handle POST requests.We want to make sure that this view doesn’t allow invalid POST and raises an exception in that case.def test_invalid_entry_create(self):    self.c.login(username='test', password='test')    data = {'text': 'Test text'}    response = self.c.post(reverse('entry_create'), data)    self.assertEqual(response.status_code, 200)    self.assertFormError(response, &quot;form&quot;, &quot;title&quot;, &quot;This field is required.&quot;)###Assertions:  Since we posted an invalid form, we expect to remain on the same page. So asserted for status code of 200.  We expect an error to be present on the title field.##Test valid formdef test_valid_entry_create(self):    self.c.login(username='test', password='test')    data = {'text': 'Test text', 'title': 'Test title'}    data['user'] = self.user.id    self.assertEqual(BlogEntry.objects.count(), 0)    response = self.c.post(reverse('entry_create'), data)    self.assertEqual(response.status_code, 302)    self.assertEqual(BlogEntry.objects.count(), 1)###Assertions:  Before posting we assert that there is no BlogEntry in the db.  After posting we check that the user is redirected and so asserted for status code of 302  We make sure that a BlogEntry is created in the database on post by checking that count of BlogEntry has been increased to 1.##Test custom manager methodsSuppose you find yourself writing the same filter multiple times for getting the blog entries which have is_published as True. In that case you would write a custom manager.We will add the custom manager in models.pyclass PublishedBlogManager(models.Manager):    def get_query_set(self, *args, **kwargs):        return super(PublishedBlogManager, self).get_query_set(*args, **kwargs).filter(is_published=True)Also we need to add this manager on BlogEntry. So, don’t forget to add next two lines to BlogEntryobjects = models.Manager()published = PublishedBlogManager()Let’s write a test now:def test_entry_custom_managers(self):    BlogEntry.objects.create(title='Test', text='Test', user=self.user, is_published=False)    BlogEntry.objects.create(title='Test', text='Test', user=self.user)    self.assertEqual(BlogEntry.objects.count(), 2)    self.assertEqual(BlogEntry.published.count(), 1)###Assertions:  We created two entries. One with is_published as False, and another with True.  objects i.e default manager returns all the entries.  published i.e custom manager returns only entries which have is_published=True.###Using custom manager in test_entries_template_context:Say now we decide that all entries should not be shown on list entries page. Only published entries should be shown.Remember test_entries_template_context. We only created two blog entries in that test. Edit that test and create one more entry with is_published=Falsedef test_entries_template_context(self):    #create few blog entries    BlogEntry.objects.create(title='Test', text='Test', user=self.user)    BlogEntry.objects.create(title='Test', text='Test', user=self.user)    BlogEntry.objects.create(title='Test', text='Test', user=self.user, is_published=False)    response = self.c.get(reverse('entries'))    #assert that context contains only published entries    self.assertEqual(len(response.context['entries']), 2)We created three entries. Only two of them are published.###Assertion:  Entries page should only show 2 entries.Run the test and it will fail.======================================================================FAIL: test_entries_template_context (blog.tests.BlogEntriesTest)----------------------------------------------------------------------Traceback (most recent call last):  File &quot;/home/akshar/play/dj/testcases/blog/tests.py&quot;, line 29, in test_entries_template_context    self.assertEqual(len(response.context['entries']), 2)AssertionError: 3 != 2----------------------------------------------------------------------Happened because we forgot to change our view. Our view still says BlogEntry.objects.all(). We should change it to BlogEntry.published.all(). Make this change and the test will pass.def entries(request):    entries = BlogEntry.published.all()    return render_to_response(&quot;blog/entries.html&quot;, {'entries': entries})So, response.context helped us find that we do not show more entries than we should.##Test for paginationSuppose we expect maximum ten entries to be available on each page. There are 15 entries in the db, so first page should show 10 entries and the second page should show 5. If user tries to access the third page a 404 page should be shown.Our decided url pattern for getting entries on a particular page:url(r'^entries/(?P&amp;lt;page&amp;gt;\d+)/$', 'blog.views.entries_page', name='entries_page')Writing the test:def test_entries_page(self):    for i in range(15):        BlogEntry.objects.create(title=&quot;title&quot;, text=&quot;text&quot;, user=self.user, is_published=True)    #access first page    response = self.c.get(reverse(&quot;entries_page&quot;, args=[1,]))    self.assertEqual(response.status_code, 200)    self.assertEqual(len(response.context['entries']), 10)    #access second page    response = self.c.get(reverse(&quot;entries_page&quot;, args=[2,]))    self.assertEqual(response.status_code, 200)    self.assertEqual(len(response.context['entries']), 5)Run the test and it will fail. Let’s add view to make it pass.def entries_page(request, page):    page = int(page)    entries = BlogEntry.published.all()    paginator = Paginator(entries, 10) #10 entries per page    page_ = paginator.page(page)    object_list = page_.object_list    return render(request, &quot;blog/entries_page.html&quot;, {&quot;entries&quot;: object_list})Test should pass now provided you have added the template.Let’s try to access third page in the test. We need to add following in test_entries_page for that.    #access third page    response = self.c.get(reverse(&quot;entries_page&quot;, args=[3,]))    self.assertEqual(response.status_code, 404)Running the test raises an error.....raise EmptyPage('That page contains no results')EmptyPage: That page contains no resultsWe find that there is a bug in our view and any page which doesn’t contain entries is not being handled as we want. Let’s change our view:def entries_page(request, page):    page = int(page)    entries = BlogEntry.published.all()    paginator = Paginator(entries, 10) #10 entries per page    if page &amp;gt; paginator.num_pages:        raise Http404()    page_ = paginator.page(page)    object_list = page_.object_list    return render(request, &quot;blog/entries_page.html&quot;, {&quot;entries&quot;: object_list})Run the test again.If you have a 404 template defined then your test will pass. In this project we do not have a 404 template and so we get another exceptionERROR: test_entries_page (blog.tests.BlogEntriesTest)----------------------------------------------------------------------Traceback (most recent call last):....    raise TemplateDoesNotExist(name)TemplateDoesNotExist: 404.htmlSo, let’s add a 404 template. Test passes once we do it.So, this test also helped us find a missing 404 template.##Test for static filesYou can look at our blog on static file if you have some confusion regarding how static files are served in Django.We will create a static directory in our app blog and will put an image in this directory. Let’s say this image is default.jpgLet’s add a test to make sure this image is found by django static file handlers. This test makes us confident that we can expect this image to be served at default.jpgfrom django.contrib.staticfiles import findersfrom django.contrib.staticfiles.storage import staticfiles_storagedef test_images(self):    abs_path = finders.find('default.jpg')    self.assertTrue(staticfiles_storage.exists(abs_path))Run the test and it should pass.You can view the complete project here.",
   "description": ""
}
</script>
<!-- bread crumbs -->
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "item": {
      "@id": "https://www.agiliq.com/",
      "name": "Home",
      "image": "https://www.agiliq.com/assets/images/logo.png"
    }
  },{
    "@type": "ListItem",
    "position": 2,
    "item": {
      "@id": "https://www.agiliq.com/blog/",
      "name": "Blog",
      "image": "https://www.agiliq.com/assets/images/logo.png"
    }
  },{
    "@type": "ListItem",
    "position": 3,
    "item": {
      "@id": "https://www.agiliq.com",
      "name": "",
      "image": "https://www.agiliq.com/assets/images/logo.png"
    }
  }]
}
</script>

						</div><!-- /.content -->
					</div><!-- /.col -->
					
					<div class="col-md-4 col-md-offset-1">
						<div class="sections-list-wrapper">
							<div class="sections-list js-sections js-affix js-scrollspy hidden-xs hidden-sm affix" style="width: 360px;"></div><!-- /.sections-list -->
						</div>
					</div><!-- /.col -->
					
				</div><!-- /.row -->
			</div><!-- /.container -->
		</div><!-- /.section -->
		
			<div class="section section--grey">
				<div class="container">
					<div class="row">
						<div class="col-md-7">
							<div id="disqus_thread"><iframe id="dsq-app1691" name="dsq-app1691" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Common testing scenarios for Django app._files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 594px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
<script>
	/**
	 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
	 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
	 */
	 /*
	var disqus_config = function () {
	this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
		this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
	};
	*/
	(function() {
		var d = document, s = d.createElement('script');

		s.src = 'https://disqusagiliq.disqus.com/embed.js';

		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="<a class="vglnk" href="https://disqus.com/?ref_noscript" rel="nofollow"><span>https</span><span>://</span><span>disqus</span><span>.</span><span>com</span><span>/?</span><span>ref</span><span>_</span><span>noscript</span></a>" rel="nofollow">comments powered by Disqus.</a></noscript>

						</div><!-- /.col -->
					</div><!-- /.row -->
				</div><!-- /.container -->
			</div><!-- /.section -->
		
		<div class="js-footer-area">
			
			
			
	<footer class="site-footer dark-bg">
		<div class="container">
			<div class="row">
				<div class="col-sm-4">
					
						<a href="https://www.agiliq.com/" class="site-footer__logo">Agiliq</a>
					
					
						<hr>
						<p class="site-footer__copyright text-white">Building Amazing Apps. © 2010-2018,  Agiliq <br>All rights reserved.</p>
					
				</div><!-- /.col -->
				
				<div class="col-sm-5">
				    <ul class="footer-links">
						    <li><a href="https://www.agiliq.com/blog/2013/04/common-testing-scenarios-for-django-app/">About Us</a></li>
						    <li><a href="https://www.agiliq.com/blog/">Blog</a></li>
						    <li><a href="https://books.agiliq.com/">Books</a></li>
						    <li><a href="https://www.agiliq.com/newsletter/">Newsletter</a></li>
						</ul>
				</div>
				
				
					<div class="col-sm-3">
						<ul class="social-list">
							
								<li>
									<a href="https://facebook.com/agiliq" target="_blank" class="social-list__item social-list__item--facebook">
										<i class="icon icon--facebook"></i>
									</a>
								</li>
							
								<li>
									<a href="https://twitter.com/agiliqdotcom" target="_blank" class="social-list__item social-list__item--twitter">
										<i class="icon icon--twitter"></i>
									</a>
								</li>
							
								<li>
									<a href="https://github.com/agiliq" target="_blank" class="social-list__item social-list__item--github">
										<i class="icon icon--github"></i>
									</a>
								</li>
							
								<li>
									<a href="https://stackoverflow.com/users/121793/agiliq" target="_blank" class="social-list__item social-list__item--stackoverflow">
										<i class="icon icon--stackoverflow"></i>
									</a>
								</li>
							
						</ul><!-- /.social-list -->
						<div class="footer-contact-us">
							<p>
								Email &nbsp;us : <strong><a href="mailto:hello@agiliq.com">hello@agiliq.com</a></strong>
							</p>
							<p>Phone us: 
								<strong><a href="tel:+919949997612">+919949997612</a></strong>
							</p>
						</div>
						
					</div><!-- /.col -->
				
			</div><!-- /.row -->
		</div><!-- /.container -->
	</footer><!-- /.site-footer -->


<script src="./Common testing scenarios for Django app._files/jquery.min.js.download"></script>
<script type="text/javascript" src="./Common testing scenarios for Django app._files/affix.min.js.download"></script>
<script type="text/javascript" src="./Common testing scenarios for Django app._files/scrollspy.min.js.download"></script>
<script type="text/javascript" src="./Common testing scenarios for Django app._files/matchHeight.min.js.download"></script>
<script type="text/javascript" src="./Common testing scenarios for Django app._files/scripts.min.js.download"></script>


<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-367368-15', 'auto');
	ga('send', 'pageview');
</script>



		</div><!-- /.js-footer-area -->
	

<iframe style="display: none;" src="./Common testing scenarios for Django app._files/saved_resource(1).html"></iframe></body></html>